---
title: 스프링 부트3 제 19장
description: "'이불킥'할 댓글은 지울게요!"
author: melonhong
date: '2025-03-07 14:47:50 +0900'
categories:
- 스프링 부트3
tags: []
---
## 뷰 페이지
### comments/_list.mustache
```html
{% raw %}
<!-- ... 생략 -->
<!-- 댓글 삭제 버튼 -->
                <button type="button"
                        class="btn btn-sm btn-outline-danger comment-delete-btn"
                        data-bs-id="{{id}}">삭제</button>
<!-- ... 생략 -->
<!-- 댓글 삭제 처리 -->
<script>
    {
        const commentDeleteBtns = document.querySelectorAll(".comment-delete-btn"); // 선택자로 지정된 모든 요소
        // 삭제 버튼 이벤트 처리
        commentDeleteBtns.forEach(btn => {
            btn.addEventListener("click", (event) => {
                const deleteBtn = event.target; // 클릭된 버튼 가져오기
                const commentId = deleteBtn.getAttribute("data-bs-id"); // 댓글 아이디 가져오기
                console.log(commentId);

                // fetch(): 비동기 통신을 위한 API
               const url = `/api/comments/${commentId}`;
               fetch(url, {
                method: "DELETE",
               }).then(response => {
                if (!response.ok) {
                    alert("댓글 삭제 실패");
                    return;
                }
                // 댓글 삭제 메시지 출력
                const msg = `${commentId}번 댓글을 삭제했습니다.`;
                alert(msg);
                // 페이지 새로 고침
                window.location.reload();
               });
            });
        });
    }
</script>
{% endraw %}
```
앞에서와는 다르게 삭제 버튼의 아이디가 아니라, 삭제 버튼을 하나의 클래스로 만들고 `querySelectorAll()` 메서드로 선택자로 지정한 모든 요소를 지정했다.  

뭉탱이로 선택했기 때문에 `forEach()` 메서드로 매개변수로 주어진 함수를 배열 속 각 요소에 적용해 처리했다. 각 요소에 이벤트 리스너를 붙이고 REST API를 호출하여 삭제 요청을 전달했다.


## 책을 마무리하며
친구한테 추천받아 공부한 책인데 정말 좋다. 이해하기도 쉽고 설명도 상세하게 써있다. 스프링 부트 입문자에게 정말 추천하고 싶은 책이다! 이제 다음 단계 책도 내줘요 작가님!

앞으로 개인 프로젝트를 할 건데 외부 DB 연결과 타 API 활용도 해야하고... 할 게 너무 많다.